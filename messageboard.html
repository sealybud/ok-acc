<!DOCTYPE html>
<html>
<head>
    <title>Message Board</title>

    <link rel="stylesheet" href="style2blog.css">

    <script src="https://kit.fontawesome.com/1f20ca141b.js" crossorigin="anonymous"></script>
</head>
<h1 style="text-align: center;">Message Board</h1>
<hr>
<nav class="clicks">
    <ul>
      <div class="clicks-container">
        <li><a href="index.html">home</a></li>
        <li><a href="about.html">about</a></li>
        <li><a href="">?</a></li>
        <li><a href="messageboard.html">message board</a></li>
        <li><a href="ok acc$.html" target="_blank">pay me</a></li></div>
    </ul>
</nav>
<body>

            <section id="posting" style="text-align: center;">
                <h2><u>Write anything</u></h2>
                <form id="posting-form">
                    <textarea class="text" id="username-input" type="username" required></textarea><br>
                    <textarea class="text" id="posting-text" name="text" rows="19" cols="190" required></textarea><br>
                    <button class="buttons" type="submit">Post</button>
                    <!--<button id="clear-messages-button">Clear All Messages</button> <div id="post-display"></div> 
                    const clearMessagesButton = document.getElementById('clear-messages-button');
                    clearMessagesButton.addEventListener('click', function() {
                    localStorage.removeItem('messages'); // Removes the 'messages' item from local storage
                    displayMessages(); // Re-display messages (will now be empty)
                    alert('All messages cleared!'); });-->
                </form>
                <div id="post-display">
                
                </div>
            </section>
        <script>
        const messageForm = document.getElementById('posting-form');
        const messageDisplay = document.getElementById('post-display');
        const usernameInput = document.getElementById('username-input'); // Get the username input field

        // Function to display messages from localStorage
        function displayMessages() {
            messageDisplay.innerHTML = ''; // Clear current messages
            const storedMessages = JSON.parse(localStorage.getItem('messages')) || [];

            storedMessages.forEach(messageData => {
                const messageElement = document.createElement('p');
                // Display username, timestamp, and message text
                messageElement.innerHTML = `<strong>${messageData.username}</strong> (${messageData.timestamp}): ${messageData.text}`;
                messageDisplay.appendChild(messageElement);
            });
        }

        // Call displayMessages on page load to show previously stored messages
        displayMessages();

        messageForm.addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent default form submission

            const username = usernameInput.value.trim(); // Get and trim the username
            const messageText = document.getElementById('posting-text').value.trim();

            if (username === '' || messageText === '') {
                alert('Please enter both your username and a message.');
                return; // Don't post empty messages or usernames
            }

            const now = new Date();
            const timestamp = now.toLocaleString(); // Formats date and time nicely

            // Get existing messages from localStorage, or initialize an empty array
            const storedMessages = JSON.parse(localStorage.getItem('messages')) || [];

            // Add the new message with its username and timestamp
            storedMessages.push({ username: username, text: messageText, timestamp: timestamp });

            // Save the updated array back to localStorage
            localStorage.setItem('messages', JSON.stringify(storedMessages));

            // Re-display all messages (including the new one)
            displayMessages();

            // Clear the message input field, but keep the username for convenience
            document.getElementById('message-text').value = '';
        });
    </script>
<br>
<br>
<br>
<br>
<br>
<br>
</body>
</html>
